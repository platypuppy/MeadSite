<html>
<head>
<link rel="stylesheet" type="text/css" href="../new.css">
<title>driver.cpp</title>
</head>

<style>
body {
   background : #ffffff; 
   margin-left : 50;
   margin-right : 20;
   background : url("../../../../../../images/notebook.jpg");
   }
</style>

<body>  
<pre class="sourcecode"><code>
<font color="990099">#include &lt;iostream&gt; // cout, endl</font>

<font color="990099">#include &quot;Vector.h&quot;</font>

<b>void</b> Print(<b>const</b> CS170::Vector&amp; array, <b>bool</b> newline = <b>true</b>)
{
  <b>for</b> (<b>unsigned</b> i = 0; i &lt; array.size(); i++)
  {
    std::cout &lt;&lt; array[i] &lt;&lt; <font color="#9933CC">&quot;  &quot;</font>;
  }

  std::cout &lt;&lt; <font color="#9933CC">&quot;(size=&quot;</font> &lt;&lt; array.size() &lt;&lt; <font color="#9933CC">&quot;, capacity=&quot;</font> &lt;&lt; 
                           array.capacity() &lt;&lt; <font color="#9933CC">&quot;, allocs=&quot;</font> &lt;&lt; 
                           array.allocations() &lt;&lt; <font color="#9933CC">&quot;)&quot;</font>;
  <b>if</b> (newline)
    std::cout &lt;&lt; std::endl;
}

<b>void</b> PrintPartial(<b>const</b> CS170::Vector&amp; array, <b>bool</b> newline = <b>true</b>)
{
  <b>for</b> (<b>unsigned</b> i = 1; i &lt; array.size(); i *= 2)
  {
    std::cout &lt;&lt; array[i - 1] &lt;&lt; <font color="#9933CC">&quot;  &quot;</font>;
  }

  std::cout &lt;&lt; <font color="#9933CC">&quot;(size=&quot;</font> &lt;&lt; array.size() &lt;&lt; <font color="#9933CC">&quot;, capacity=&quot;</font> &lt;&lt; 
                           array.capacity() &lt;&lt; <font color="#9933CC">&quot;, allocs=&quot;</font> &lt;&lt; 
                           array.allocations() &lt;&lt; <font color="#9933CC">&quot;)&quot;</font>;
  <b>if</b> (newline)
    std::cout &lt;&lt; std::endl;
}

<b>void</b> TestSwap1()
{
  std::cout &lt;&lt; <font color="#9933CC">&quot;&#92;n********** TestSwap1 **********&#92;n&quot;</font>;
  CS170::Vector a, b, c;

  std::cout &lt;&lt; <font color="#9933CC">&quot;push_back integers:&#92;n&quot;</font>;
  <b>for</b> (<b>int</b> i = 0; i &lt; 10; i++)
    a.push_back(i + 1);
  <b>for</b> (<b>int</b> i = 0; i &lt; 5; i++)
    b.push_back(10 * (i + 1));

  std::cout &lt;&lt; <font color="#9933CC">&quot;a: &quot;</font>;
  Print(a);
  std::cout &lt;&lt; <font color="#9933CC">&quot;b: &quot;</font>;
  Print(b);

  std::cout &lt;&lt; <font color="#9933CC">&quot;swapv a,b:&#92;n&quot;</font>;
  a.swapv(b);
  std::cout &lt;&lt; <font color="#9933CC">&quot;a: &quot;</font>;
  Print(a);
  std::cout &lt;&lt; <font color="#9933CC">&quot;b: &quot;</font>;
  Print(b);

  std::cout &lt;&lt; <font color="#9933CC">&quot;swapv a,c:&#92;n&quot;</font>;
  a.swapv(c);
  std::cout &lt;&lt; <font color="#9933CC">&quot;a: &quot;</font>;
  Print(a);
  std::cout &lt;&lt; <font color="#9933CC">&quot;c: &quot;</font>;
  Print(c);

  std::cout &lt;&lt; <font color="#9933CC">&quot;swapv b,b:&#92;n&quot;</font>;
  b.swapv(b);
  std::cout &lt;&lt; <font color="#9933CC">&quot;b: &quot;</font>;
  Print(b);
}

<b>void</b> TestReverse1()
{
  <b>int</b> count = 10;
  std::cout &lt;&lt; <font color="#9933CC">&quot;&#92;n********** TestReverse1 **********&#92;n&quot;</font>;
  CS170::Vector a;

  std::cout &lt;&lt; <font color="#9933CC">&quot;push_back integers:&#92;n&quot;</font>;
  <b>for</b> (<b>int</b> i = 0; i &lt; count; i++)
    a.push_back(i + 1);

  Print(a);
  a.reverse();
  std::cout &lt;&lt; <font color="#9933CC">&quot;Reversed:&#92;n&quot;</font>;
  Print(a);

  std::cout &lt;&lt; <font color="#9933CC">&quot;Remove last element:&#92;n&quot;</font>;
  a.pop_back();
  Print(a);
  a.reverse();
  std::cout &lt;&lt; <font color="#9933CC">&quot;Reversed:&#92;n&quot;</font>;
  Print(a);
}

<b>void</b> TestReverse2()
{
  <b>int</b> count = 10;
  std::cout &lt;&lt; <font color="#9933CC">&quot;&#92;n********** TestReverse2 **********&#92;n&quot;</font>;
  CS170::Vector a;

  std::cout &lt;&lt; <font color="#9933CC">&quot;push_back integers:&#92;n&quot;</font>;
  <b>for</b> (<b>int</b> i = 0; i &lt; count; i++)
    a.push_back(i + 1);

  Print(a);
  a.reverse();
  std::cout &lt;&lt; <font color="#9933CC">&quot;Reversed:&#92;n&quot;</font>;
  Print(a);

  <b>while</b> (!a.empty())
  {
    <b>if</b> (a.size() % 2) <font color="#003399"><i>// odd</i></font>
    {
      std::cout &lt;&lt; <font color="#9933CC">&quot;Remove last element:&#92;n&quot;</font>;
      a.pop_back();
    }
    <b>else</b> <font color="#003399"><i>// even</i></font>
    {
      std::cout &lt;&lt; <font color="#9933CC">&quot;Remove first element:&#92;n&quot;</font>;
      a.pop_front();
    }
    Print(a);
    a.reverse();
    std::cout &lt;&lt; <font color="#9933CC">&quot;Reversed:&#92;n&quot;</font>;
    Print(a);
  }
}

<b>void</b> TestEqual1()
{
  std::cout &lt;&lt; <font color="#9933CC">&quot;&#92;n********** TestEqual1 **********&#92;n&quot;</font>;
  CS170::Vector a, b, c;

  std::cout &lt;&lt; <font color="#9933CC">&quot;push_back integers:&#92;n&quot;</font>;
  <b>for</b> (<b>int</b> i = 0; i &lt; 10; i++)
    a.push_back(i + 1);
  <b>for</b> (<b>int</b> i = 0; i &lt; 10; i++)
    b.push_back(i + 1);

  std::cout &lt;&lt; <font color="#9933CC">&quot;a: &quot;</font>;
  Print(a);
  std::cout &lt;&lt; <font color="#9933CC">&quot;b: &quot;</font>;
  Print(b);

  <b>if</b> (a == b)
    std::cout &lt;&lt; <font color="#9933CC">&quot;a is equal to b&#92;n&quot;</font>;
  <b>else</b>
    std::cout &lt;&lt; <font color="#9933CC">&quot;a is NOT equal to b&#92;n&quot;</font>;

  std::cout &lt;&lt; <font color="#9933CC">&quot;remove last element of a:&#92;n&quot;</font>;
  a.pop_back();
  std::cout &lt;&lt; <font color="#9933CC">&quot;a: &quot;</font>;
  Print(a);
  std::cout &lt;&lt; <font color="#9933CC">&quot;b: &quot;</font>;
  Print(b);
  <b>if</b> (a == b)
    std::cout &lt;&lt; <font color="#9933CC">&quot;a is equal to b&#92;n&quot;</font>;
  <b>else</b>
    std::cout &lt;&lt; <font color="#9933CC">&quot;a is NOT equal to b&#92;n&quot;</font>;

  std::cout &lt;&lt; <font color="#9933CC">&quot;remove last element of b:&#92;n&quot;</font>;
  b.pop_back();
  std::cout &lt;&lt; <font color="#9933CC">&quot;a: &quot;</font>;
  Print(a);
  std::cout &lt;&lt; <font color="#9933CC">&quot;b: &quot;</font>;
  Print(b);
  <b>if</b> (a == b)
    std::cout &lt;&lt; <font color="#9933CC">&quot;a is equal to b&#92;n&quot;</font>;
  <b>else</b>
    std::cout &lt;&lt; <font color="#9933CC">&quot;a is NOT equal to b&#92;n&quot;</font>;

  std::cout &lt;&lt; <font color="#9933CC">&quot;change last element of b to 100:&#92;n&quot;</font>;
  b[b.size() - 1] = 100;
  std::cout &lt;&lt; <font color="#9933CC">&quot;a: &quot;</font>;
  Print(a);
  std::cout &lt;&lt; <font color="#9933CC">&quot;b: &quot;</font>;
  Print(b);
  <b>if</b> (a == b)
    std::cout &lt;&lt; <font color="#9933CC">&quot;a is equal to b&#92;n&quot;</font>;
  <b>else</b>
    std::cout &lt;&lt; <font color="#9933CC">&quot;a is NOT equal to b&#92;n&quot;</font>;
}

<font color="#003399"><i>/*
  Before C++17, the exception output was undefined. Now, it is guaranteed
  to print out the text before the exception gets thrown. This means that 
  this define is no longer needed. However, it's still fine and will work
  with all compilers.
*/</i></font>
<font color="990099">#define SAFE_EXCEPTION</font>
<b>void</b> TestSubscriptEx()
{
  std::cout &lt;&lt; <font color="#9933CC">&quot;&#92;n********** TestSubscriptEx **********&#92;n&quot;</font>;
  <b>int</b> ia[] = {2, 4, 6, 6, 8, 10, 6, 12, -6, 14, 16, 6, 6};
  <b>unsigned</b> size = <b>static_cast</b>&lt;<b>unsigned</b>&gt;(<b>sizeof</b>(ia) / <b>sizeof</b>(*ia));
  std::cout &lt;&lt; <font color="#9933CC">&quot;Construct from int array:&#92;n&quot;</font>;

  <b>const</b> CS170::Vector a(ia, size); <font color="#003399"><i>// const</i></font>
  CS170::Vector b(ia, size);       <font color="#003399"><i>// non-const</i></font>
  Print(a);
  Print(b);

  <b>try</b>
  {
    <b>unsigned</b> index = a.size() * 2; <font color="#003399"><i>// illegal</i></font>
    std::cout &lt;&lt; <font color="#9933CC">&quot;accessing subscript on const vector: a[&quot;</font> &lt;&lt; index &lt;&lt; <font color="#9933CC">&quot;]&quot;</font> &lt;&lt; std::endl;
    <font color="990099">#ifdef SAFE_EXCEPTION</font>
      std::cout &lt;&lt; <font color="#9933CC">&quot;a[&quot;</font> &lt;&lt; index &lt;&lt; <font color="#9933CC">&quot;] = &quot;</font>;
      std::cout.flush();
      std::cout &lt;&lt; a[index] &lt;&lt; std::endl;
    <font color="990099">#else</font>
      std::cout &lt;&lt; <font color="#9933CC">&quot;a[&quot;</font> &lt;&lt; index &lt;&lt; <font color="#9933CC">&quot;] = &quot;</font> &lt;&lt; a[index] &lt;&lt; std::endl;
    <font color="990099">#endif</font>
  }
  <b>catch</b>(<b>const</b> CS170::SubscriptError &amp;se)
  {
    std::cout &lt;&lt; <font color="#9933CC">&quot;Bad subscript: &quot;</font> &lt;&lt; se.GetSubscript() &lt;&lt; std::endl;
  }

  <b>try</b>
  {
    <b>unsigned</b> index = b.size() * 2; <font color="#003399"><i>// illegal</i></font>
    std::cout &lt;&lt; <font color="#9933CC">&quot;accessing subscript on non-const vector: b[&quot;</font> &lt;&lt; index &lt;&lt; <font color="#9933CC">&quot;]&quot;</font> &lt;&lt; std::endl;
    <font color="990099">#ifdef SAFE_EXCEPTION</font>
      std::cout &lt;&lt; <font color="#9933CC">&quot;b[&quot;</font> &lt;&lt; index &lt;&lt; <font color="#9933CC">&quot;] = &quot;</font>;
      std::cout.flush();
      std::cout &lt;&lt; b[index] &lt;&lt; std::endl;
    <font color="990099">#else</font>
      std::cout &lt;&lt; <font color="#9933CC">&quot;b[&quot;</font> &lt;&lt; index &lt;&lt; <font color="#9933CC">&quot;] = &quot;</font> &lt;&lt; b[index] &lt;&lt; std::endl;
    <font color="990099">#endif</font>
  }
  <b>catch</b>(<b>const</b> CS170::SubscriptError &amp;se)
  {
    std::cout &lt;&lt; <font color="#9933CC">&quot;Bad subscript: &quot;</font> &lt;&lt; se.GetSubscript() &lt;&lt; std::endl;
  }
}

<b>void</b> TestInsertEx()
{
  std::cout &lt;&lt; <font color="#9933CC">&quot;&#92;n********** TestInsertEx **********&#92;n&quot;</font>;
  <b>int</b> ia[] = {2, 4, 6, 6, 8, 10, 6, 12, -6, 14, 16, 6, 6};
  <b>unsigned</b> size = <b>static_cast</b>&lt;<b>unsigned</b>&gt;(<b>sizeof</b>(ia) / <b>sizeof</b>(*ia));
  std::cout &lt;&lt; <font color="#9933CC">&quot;Construct from int array:&#92;n&quot;</font>;
  CS170::Vector a(ia, size);
  Print(a);

  <b>try</b>
  {
    <b>unsigned</b> index = a.size() * 3; <font color="#003399"><i>// illegal</i></font>
    std::cout &lt;&lt; <font color="#9933CC">&quot;insert integer at index &quot;</font> &lt;&lt; index &lt;&lt; <font color="#9933CC">&quot;:&#92;n&quot;</font>;
    a.insert(99, index);
  }
  <b>catch</b>(<b>const</b> CS170::SubscriptError &amp;se)
  {
    std::cout &lt;&lt; <font color="#9933CC">&quot;Bad subscript: &quot;</font> &lt;&lt; se.GetSubscript() &lt;&lt; std::endl;
  }
}

<b>void</b> TestSwapStress()
{
  std::cout &lt;&lt; <font color="#9933CC">&quot;&#92;n********** TestSwapStress **********&#92;n&quot;</font>;
  CS170::Vector a, b, c;

  <b>int</b> count = 1000000;

  std::cout &lt;&lt; <font color="#9933CC">&quot;Pushing back...&#92;n&quot;</font>;
  <b>for</b> (<b>int</b> i = 0; i &lt; count; i++)
  {
    a.push_back(i);
    b.push_back(i * 2);
    c.push_back(i * 3);
  }

  std::cout &lt;&lt; <font color="#9933CC">&quot;Swapping...&#92;n&quot;</font>;
  CS170::Vector x;
  <b>for</b> (<b>int</b> i = 0; i &lt; 1000001; i++)
  {
    a.swapv(b);
    b.swapv(c);
    c.swapv(a);
  }

  PrintPartial(a);
  PrintPartial(b);
  PrintPartial(c);

  std::cout &lt;&lt; <font color="#9933CC">&quot;Done...&#92;n&quot;</font>;
}

<b>void</b> TestShrink1()
{
  std::cout &lt;&lt; <font color="#9933CC">&quot;&#92;n********** TestShrink1 **********&#92;n&quot;</font>;
  CS170::Vector a;

  std::cout &lt;&lt; <font color="#9933CC">&quot;push_back 8 integers:&#92;n&quot;</font>;
  <b>for</b> (<b>int</b> i = 0; i &lt; 8; i++)
    a.push_back(i);
  Print(a);

  std::cout &lt;&lt; <font color="#9933CC">&quot;shrink:&#92;n&quot;</font>;
  a.shrink_to_fit();
  Print(a);

  std::cout &lt;&lt; <font color="#9933CC">&quot;pop last 3:&#92;n&quot;</font>;
  a.pop_back();
  a.pop_back();
  a.pop_back();
  Print(a);

  std::cout &lt;&lt; <font color="#9933CC">&quot;shrink:&#92;n&quot;</font>;
  a.shrink_to_fit();
  Print(a);

  std::cout &lt;&lt; <font color="#9933CC">&quot;push_back one integer:&#92;n&quot;</font>;
  a.push_back(100);
  Print(a);

  std::cout &lt;&lt; <font color="#9933CC">&quot;shrink:&#92;n&quot;</font>;
  a.shrink_to_fit();
  Print(a);

  std::cout &lt;&lt; <font color="#9933CC">&quot;shrink:&#92;n&quot;</font>;
  a.shrink_to_fit();
  Print(a);

  std::cout &lt;&lt; <font color="#9933CC">&quot;clear:&#92;n&quot;</font>;
  a.clear();
  Print(a);

  std::cout &lt;&lt; <font color="#9933CC">&quot;shrink:&#92;n&quot;</font>;
  a.shrink_to_fit();
  Print(a);
}

<b>int</b> main()
{
  TestSwap1();
  TestReverse1();
  TestReverse2();
  TestEqual1();
  TestShrink1();
  TestSubscriptEx();
  TestInsertEx();
  TestSwapStress();

  <b>return</b> 0;
}
</code></pre>

</body>
</html>

<blockquote><pre>
</pre></blockquote>

